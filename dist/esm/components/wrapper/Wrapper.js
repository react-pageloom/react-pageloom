import{__rest as o}from"../../_virtual/_tslib.js";import{forwardRef as e,Children as r,isValidElement as s,cloneElement as a,Fragment as i}from"react";import{jsx as l,jsxs as t}from"../../node_modules/@theme-ui/core/jsx-runtime/dist/theme-ui-core-jsx-runtime.esm.js";import{Global as n}from"@emotion/react";import m from"emotion-reset";import{Link as p}from"react-scroll";import{classNames as c}from"../../utils/classNames.js";import{PageBlock as d}from"../block/Block.js";import{PageHeader as f}from"../header/Header.js";import{HeaderLogo as u}from"../logo/Logo.js";import{PageNavigation as N}from"../navigation/Navigation.js";import{Wrapper as j,BlockContainer as b}from"./Wrapper.styled.js";const g=e(((e,g)=>{var{className:h,children:v,duration:y=500,snapScroll:k=!1,fixedNav:x=!1}=e,O=o(e,["className","children","duration","snapScroll","fixedNav"]);let _=null,S=null,$=null;const w=[],L=c("loom-wrapper_root",h);r.forEach(v,((o,e)=>{if(!s(o))return;const r=o.type;if(r.displayName===f.displayName){const e=Object.assign(Object.assign({},o.props),{snap:k,fixedNav:x});_=a(o,e),$=o.props.children.find((o=>o.type===u))}else if(r.displayName===d.displayName){const r=a(o,{snap:k,fixedNav:x,key:`loom-block-${e}`});w.push(r)}else"PageFooter"===r.displayName?S=a(o,Object.assign(Object.assign({},o.props),{snap:k,fixedNav:x,key:`loom-footer-${e}`})):console.warn(`Invalid child component ${r.displayName} found in the Wrapper`)}));const W=w.map((o=>{const{id:e,label:r}=o.props;return l(p,Object.assign({className:"loom-nav_link",activeClass:"loom-nav_active",to:e,spy:!0,smooth:!0,duration:y,offset:x?-55:0},k&&{containerId:"loom-wrapper"},{children:r||e}),`loom-link-${e}`)})),E=_?a(_,{blockLinks:W}):null;return t(i,{children:[l(n,{styles:Object.assign(Object.assign({},m),{boxSizing:"border-box"})}),t(j,Object.assign({id:"loom-wrapper",className:L,$snapScroll:k,ref:g},O,{children:[x&&l(N,{blockLinks:W,logoElement:$,snapScroll:k,fixedNav:x}),E,l(b,{children:w}),S]}))]})}));g.displayName="PageWrapper";export{g as PageWrapper};
