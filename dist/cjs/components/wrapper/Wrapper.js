"use strict";var e=require("../../_virtual/_tslib.js"),s=require("react"),r=require("../../node_modules/@theme-ui/core/jsx-runtime/dist/theme-ui-core-jsx-runtime.esm.js"),a=require("@emotion/react"),o=require("emotion-reset"),l=require("react-scroll"),i=require("../../utils/classNames.js"),n=require("../block/Block.js"),t=require("../header/Header.js"),c=require("../logo/Logo.js"),p=require("../navigation/Navigation.js"),d=require("./Wrapper.styled.js");const m=s.forwardRef(((m,u)=>{var{className:j,children:g,duration:N=500,snapScroll:b=!1,fixedNav:f=!1}=m,v=e.__rest(m,["className","children","duration","snapScroll","fixedNav"]);let x=null,h=null,k=null;const y=[],q=i.classNames("loom-wrapper_root",j);s.Children.forEach(g,((e,r)=>{if(!s.isValidElement(e))return;const a=e.type;if(a.displayName===t.PageHeader.displayName){const r=Object.assign(Object.assign({},e.props),{snap:b,fixedNav:f});x=s.cloneElement(e,r),k=e.props.children.find((e=>e.type===c.HeaderLogo))}else if(a.displayName===n.PageBlock.displayName){const a=s.cloneElement(e,{snap:b,fixedNav:f,key:`loom-block-${r}`});y.push(a)}else"PageFooter"===a.displayName?h=s.cloneElement(e,Object.assign(Object.assign({},e.props),{snap:b,fixedNav:f,key:`loom-footer-${r}`})):console.warn(`Invalid child component ${a.displayName} found in the Wrapper`)}));const O=y.map((e=>{const{id:s,label:a}=e.props;return r.jsx(l.Link,Object.assign({className:"loom-nav_link",activeClass:"loom-nav_active",to:s,spy:!0,smooth:!0,duration:N,offset:f?-55:0},b&&{containerId:"loom-wrapper"},{children:a||s}),`loom-link-${s}`)})),_=x?s.cloneElement(x,{blockLinks:O}):null;return r.jsxs(s.Fragment,{children:[r.jsx(a.Global,{styles:Object.assign(Object.assign({},o),{boxSizing:"border-box"})}),r.jsxs(d.Wrapper,Object.assign({id:"loom-wrapper",className:q,$snapScroll:b,ref:u},v,{children:[f&&r.jsx(p.PageNavigation,{blockLinks:O,logoElement:k,snapScroll:b,fixedNav:f}),_,r.jsx(d.BlockContainer,{children:y}),h]}))]})}));m.displayName="PageWrapper",exports.PageWrapper=m;
